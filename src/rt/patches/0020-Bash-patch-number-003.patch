From dc57df9d47f132628e17a7a6e9c69a988578cc1c Mon Sep 17 00:00:00 2001
From: Thomas Braun <thomas.braun@byte-physics.de>
Date: Thu, 25 Sep 2014 00:56:00 +0200
Subject: [PATCH 20/35] Bash patch number 003

---
 msys/packages/bash/3.1/patchlevel.h | 2 +-
 msys/packages/bash/3.1/variables.c  | 2 ++
 2 files changed, 3 insertions(+), 1 deletion(-)

diff --git a/msys/packages/bash/3.1/patchlevel.h b/msys/packages/bash/3.1/patchlevel.h
index a66f6d7..de42a3d 100644
--- a/msys/packages/bash/3.1/patchlevel.h
+++ b/msys/packages/bash/3.1/patchlevel.h
@@ -25,6 +25,6 @@
    regexp `^#define[ 	]*PATCHLEVEL', since that's what support/mkversion.sh
    looks for to find the patch level (for the sccs version string). */
 
-#define PATCHLEVEL 2
+#define PATCHLEVEL 3
 
 #endif /* _PATCHLEVEL_H_ */
diff --git a/msys/packages/bash/3.1/variables.c b/msys/packages/bash/3.1/variables.c
index 658d7f9..c5a0207 100644
--- a/msys/packages/bash/3.1/variables.c
+++ b/msys/packages/bash/3.1/variables.c
@@ -860,9 +860,11 @@ sh_set_lines_and_columns (lines, cols)
 {
   char val[INT_STRLEN_BOUND(int) + 1], *v;
 
+#if defined (READLINE)
   /* If we are currently assigning to LINES or COLUMNS, don't do anything. */
   if (winsize_assignment)
     return;
+#endif
 
   v = inttostr (lines, val, sizeof (val));
   bind_variable ("LINES", v, 0);
-- 
2.1.0.msysgit.0

