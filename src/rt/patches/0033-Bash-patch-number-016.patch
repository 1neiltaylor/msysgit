From 4d87f61952998ab1ac04822f9f4550aa79e2a2c6 Mon Sep 17 00:00:00 2001
From: Thomas Braun <thomas.braun@byte-physics.de>
Date: Thu, 25 Sep 2014 00:56:01 +0200
Subject: [PATCH 33/35] Bash patch number 016

---
 msys/packages/bash/3.1/lib/glob/glob.c | 3 +++
 msys/packages/bash/3.1/patchlevel.h    | 2 +-
 2 files changed, 4 insertions(+), 1 deletion(-)

diff --git a/msys/packages/bash/3.1/lib/glob/glob.c b/msys/packages/bash/3.1/lib/glob/glob.c
index 9a2d833..1453b06 100644
--- a/msys/packages/bash/3.1/lib/glob/glob.c
+++ b/msys/packages/bash/3.1/lib/glob/glob.c
@@ -360,6 +360,7 @@ glob_vector (pat, dir, flags)
   count = lose = skip = 0;
 
   firstmalloc = 0;
+  nalloca = 0;
 
   /* If PAT is empty, skip the loop, but return one (empty) filename. */
   if (pat == 0 || *pat == '\0')
@@ -546,6 +547,8 @@ glob_vector (pat, dir, flags)
 		firstmalloc = 0;
 	      tmplink = lastlink;
 	    }
+	  else
+	    tmplink = 0;
 	  free (lastlink->name);
 	  lastlink = lastlink->next;
 	  FREE (tmplink);
diff --git a/msys/packages/bash/3.1/patchlevel.h b/msys/packages/bash/3.1/patchlevel.h
index 0531899..1a4a65a 100644
--- a/msys/packages/bash/3.1/patchlevel.h
+++ b/msys/packages/bash/3.1/patchlevel.h
@@ -25,6 +25,6 @@
    regexp `^#define[ 	]*PATCHLEVEL', since that's what support/mkversion.sh
    looks for to find the patch level (for the sccs version string). */
 
-#define PATCHLEVEL 15
+#define PATCHLEVEL 16
 
 #endif /* _PATCHLEVEL_H_ */
-- 
2.1.0.msysgit.0

